//-
//- caos-dashboard - CAOS dashboard
//-
//- Copyright Â© 2016 INFN - Istituto Nazionale di Fisica Nucleare (Italy)
//-
//- Licensed under the Apache License, Version 2.0 (the "License");
//- you may not use this file except in compliance with the License.
//- You may obtain a copy of the License at
//-
//-     http://www.apache.org/licenses/LICENSE-2.0
//-
//- Unless required by applicable law or agreed to in writing, software
//- distributed under the License is distributed on an "AS IS" BASIS,
//- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//- See the License for the specific language governing permissions and
//- limitations under the License.
//-
//-
//- Author: Fabrizio Chiarello <fabrizio.chiarello@pd.infn.it>
//-

doctype html
html(lang='en')
head
  base(href="/")
  meta(charset='utf-8')
  meta(
    name='viewport'
    content='initial-scale=1.0, user-scalable=no, width=device-width, maximum-scale=1.0, user-scalable=no')
  title CAOS - Cloud Accounting for Open Stack

  script(src='js/vendor/shim.min.js')
  script(src='js/vendor/zone.min.js')
  script(src='js/vendor/system.js')
  script(src='js/env.js')
  script(src='js/bundle.js')

  link(rel='stylesheet' href='css/style.css')

body
  block content

  script.
    var map = {
      'rxjs': 'npm:rxjs',
      'reflect-metadata': 'npm:reflect-metadata',
      'ng2-bootstrap': 'npm:ng2-bootstrap',
      'ng2-popover': 'npm:ng2-popover',
      'moment': 'npm:moment',
      'd3': 'npm:d3',
      'nvd3': 'npm:nvd3',
      'ng2-nvd3': 'npm:ng2-nvd3',
    };
    var angular_pkgs = [
      'common',
      'compiler',
      'core',
      'forms',
      'http',
      'platform-browser',
      'platform-browser-dynamic',
      'router'
    ];

    angular_pkgs.forEach(function(pkgName) {
      map['@angular/' + pkgName] = 'npm:@angular/' + pkgName + '/bundles/' + pkgName + '.umd.js';
    });

    System.config({
      map: map,
      packages: {
        caos: {},
        rxjs: { defaultExtension: 'js' },
        'reflect-metadata': { main: 'Reflect.js', defaultExtension: 'js' },
        moment: { main: 'min/moment-with-locales.js', defaultExtension: 'js' },
        d3: { main: 'd3.js', defaultExtension: 'js' },
        nvd3: {
          main: 'build/nv.d3.js',
          defaultExtension: 'js',
          meta: { deps: 'd3' }
        },
        'ng2-nvd3': { main: 'build/lib/ng2-nvd3.js', defaultExtension: 'js' },
        'ng2-bootstrap': { defaultExtension: 'js' },
        'ng2-popover': { main: 'index.js', defaultExtension: 'js' },
      }
    });

    System.import('caos/bootstrap')
      .catch(function(err) { console.error(err); });
